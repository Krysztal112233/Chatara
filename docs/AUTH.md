## 认证

对于认证，后端与前端采用 JWT 的方式来进行认证：这样有助于以简单的起点构建分布式服务并且避免使用 session 带来的状态管理与副作用

### 流程

由于我们使用 Auth0, 因此我们的流程与 Auth0 的实例一致：

- 用户通过 Auth0 提供的登录登录后获得颁发的 JWT，前端将保存这个 JWT 并且将其携带在 Header 中在需要的时候发送给后端
- 后端会对这个 JWT 进行验证，验证完毕后会检查用户是否存在于数据库中，如果数据库中没有用户的话就会新建一个用户

除此之外，后端有如下额外的流程

- 后端会保存来自 Auth0 的 JWKS，这是验证 JWT 是否合法的重要数据
- 后端会定时刷新从 Auth0 获取的 JWKS，这是密钥轮换相关机制导致的——一个密钥不能使用太久，需要轮换
- 当 JWT 无法证明合法时，相关端点将会拒绝响应
